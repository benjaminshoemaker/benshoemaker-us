---
import type { Project } from '../data/projects';

interface Props {
  projects: Project[];
}

const { projects } = Astro.props;

function formatMonthYear(dateString: string): string {
  const date = new Date(dateString + 'T00:00:00');
  return date.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
}
---

<div class="relative">
  {/* Vertical line */}
  <div class="absolute left-3 top-2 bottom-2 w-px bg-border" aria-hidden="true" />

  <div class="space-y-8">
    {projects.map((project) => (
      <div class="relative pl-10">
        {/* Dot */}
        <div class="absolute left-1.5 top-1.5 w-3 h-3 rounded-full bg-accent border-2 border-surface" aria-hidden="true" />

        <div>
          <time class="text-xs font-medium text-text-muted uppercase tracking-wide">
            {formatMonthYear(project.startDate!)}
          </time>
          <h3 class="text-base font-semibold text-text-primary mt-1">
            {project.githubUrl || project.liveUrl ? (
              <a
                href={project.liveUrl || project.githubUrl}
                target="_blank"
                rel="noopener noreferrer"
                class="hover:text-accent transition-colors focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-focus"
              >
                {project.name}
              </a>
            ) : (
              project.name
            )}
          </h3>
          <p class="text-sm text-text-body mt-0.5">{project.description}</p>
          <div class="flex flex-wrap gap-1.5 mt-2">
            {project.techStack.map(tech => (
              <span class="inline-block px-2 py-0.5 text-xs font-medium rounded bg-surface-muted text-text-muted">
                {tech}
              </span>
            ))}
          </div>
        </div>
      </div>
    ))}
  </div>
</div>
